{{ define "main" }}
<div class="container mx-auto px-4 py-12">
    <!-- Two Column Layout for Content and Sidebar -->
    <div class="flex flex-col lg:flex-row gap-8 mb-12">
        <!-- Main Content -->
        <article class="flex-1">
            <header class="mb-8">
                {{ with .Params.categories }}
                    <div class="mb-4">
                        {{ range . }}
                            <a href="{{ "/categories/" | relLangURL }}{{ . | urlize }}" 
                               class="inline-block px-3 py-1 text-sm font-medium text-primary-600 bg-primary-50 rounded-full hover:bg-primary-100 mr-2">
                                {{ . }}
                            </a>
                        {{ end }}
                    </div>
                {{ end }}

                <h1 class="text-4xl font-bold mb-4">{{ .Title }}</h1>
                
                <div class="flex items-center justify-between text-sm text-gray-500">
                    <div class="flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        <span>{{ with .Params.author }}{{ . }}{{ else }}{{ .Site.Params.author }}{{ end }}</span>
                    </div>
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                            </svg>
                            <span>{{ .ReadingTime }} min read</span>
                        </div>
                        <div class="flex items-center">
                            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
                        </div>
                    </div>
                </div>
            </header>

            {{ with .Params.featured_image }}
                <div class="mb-8">
                    <img src="{{ . }}" 
                         alt="{{ $.Title }}" 
                         class="w-full h-auto rounded-lg"
                         loading="lazy">
                </div>
            {{ end }}

            <div class="prose prose-lg max-w-none">
                {{ .Content }}
            </div>
        </article>

        <!-- Sidebar -->
        <aside class="lg:w-80 xl:w-96">
            {{ partial "sidebar" . }}
        </aside>
    </div>

    <!-- Full-width Navigation Section -->
    <nav class="border-t border-gray-200 mt-12 pt-8">
        <div class="flex justify-between items-center">
            {{ with .PrevInSection }}
                <a href="{{ .RelPermalink }}" 
                   class="group flex items-center">
                    <svg class="w-5 h-5 mr-2 text-gray-600 group-hover:text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    <div class="text-left">
                        <div class="text-sm text-gray-500">Previous</div>
                        <div class="text-gray-900 group-hover:text-primary-600 font-medium truncate max-w-xs">{{ .Title }}</div>
                    </div>
                </a>
            {{ else }}
                <div></div>
            {{ end }}

            {{ with .NextInSection }}
                <a href="{{ .RelPermalink }}" 
                   class="group flex items-center">
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Next</div>
                        <div class="text-gray-900 group-hover:text-primary-600 font-medium truncate max-w-xs">{{ .Title }}</div>
                    </div>
                    <svg class="w-5 h-5 ml-2 text-gray-600 group-hover:text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            {{ else }}
                <div></div>
            {{ end }}
        </div>
    </nav>
</div>
{{ end }}
