# Decap CMS 配置文件
# 本地开发配置

backend:
  name: git-gateway
  branch: main
  commit_messages:
    create: "Create {{collection}} \"{{slug}}\""
    update: "Update {{collection}} \"{{slug}}\""
    delete: "Delete {{collection}} \"{{slug}}\""
    uploadMedia: "Upload \"{{path}}\""
    deleteMedia: "Delete \"{{path}}\""

# 本地开发时使用本地后端
# 注意：本地开发需要运行 npx decap-server
local_backend: true

media_folder: "static/images/uploads"
public_folder: "/images/uploads"

# 站点 URL（部署后需要更新）
site_url: https://your-site.netlify.app

# 显示提交预览链接
show_preview_links: true

# 编辑器配置
editor:
  preview: true

# SEO字段定义 - 可复用
seo_fields: &seo_fields
  - name: "seo"
    label: "SEO设置"
    widget: "object"
    collapsed: true
    fields:
      - label: "SEO标题"
        name: "seo_title"
        widget: "string"
        required: false
        hint: "覆盖默认标题，建议60字符以内"
      - label: "Meta描述"
        name: "description"
        widget: "text"
        required: false
        hint: "建议150-160字符，用于搜索结果展示"
      - label: "关键词"
        name: "keywords"
        widget: "list"
        required: false
        hint: "输入长尾关键词，用回车分隔"
      - label: "Robots设置"
        name: "robots"
        widget: "select"
        options:
          - { label: "索引并跟随 (index, follow)", value: "index, follow" }
          - { label: "不索引但跟随 (noindex, follow)", value: "noindex, follow" }
          - { label: "索引但不跟随 (index, nofollow)", value: "index, nofollow" }
          - { label: "不索引不跟随 (noindex, nofollow)", value: "noindex, nofollow" }
        default: "index, follow"
        hint: "控制搜索引擎爬虫行为"
      - label: "OG图片"
        name: "image"
        widget: "image"
        required: false
        hint: "社交媒体分享时显示的图片，建议1200x630像素"
      - label: "OG图片Alt文本"
        name: "image_alt"
        widget: "string"
        required: false
        hint: "图片的替代文本，用于无障碍访问"
      - label: "Canonical URL"
        name: "canonical"
        widget: "string"
        required: false
        hint: "规范链接，用于解决重复内容问题"
      - label: "自定义Meta标签"
        name: "customMeta"
        widget: "list"
        required: false
        fields:
          - label: "属性名"
            name: "name"
            widget: "string"
          - label: "属性值"
            name: "content"
            widget: "string"

# 定义内容集合
collections:
  # 博客文章
  - name: "blog"
    label: "博客文章"
    folder: "content/blog"
    create: true
    slug: "{{slug}}"
    preview_path: "blog/{{slug}}"
    fields:
      - { label: "标题", name: "title", widget: "string", required: true }
      - { label: "发布日期", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: "HH:mm", required: true }
      - { label: "最后修改日期", name: "lastmod", widget: "datetime", date_format: "YYYY-MM-DD", time_format: "HH:mm", required: false }
      - { label: "草稿", name: "draft", widget: "boolean", default: false }
      - { label: "作者", name: "author", widget: "string", required: false }
      - { label: "特色图片", name: "featured_image", widget: "image", required: false, hint: "文章顶部显示的图片" }
      - { label: "分类", name: "categories", widget: "list", required: false }
      - { label: "标签", name: "tags", widget: "list", required: false }
      # SEO字段
      - <<: *seo_fields
      - { label: "正文", name: "body", widget: "markdown", required: true }

  # 功能页面
  - name: "features"
    label: "功能页面"
    folder: "content/features"
    create: true
    slug: "{{slug}}"
    preview_path: "features/{{slug}}"
    fields:
      - { label: "标题", name: "title", widget: "string", required: true }
      - { label: "发布日期", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: "HH:mm", required: true }
      - { label: "草稿", name: "draft", widget: "boolean", default: false }
      # SEO字段
      - <<: *seo_fields
      - { label: "正文", name: "body", widget: "markdown", required: true }

  # 职位页面
  - name: "jobs"
    label: "招聘职位"
    folder: "content/jobs"
    create: true
    slug: "{{slug}}"
    preview_path: "jobs/{{slug}}"
    fields:
      - { label: "标题", name: "title", widget: "string", required: true }
      - { label: "发布日期", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: "HH:mm", required: true }
      - { label: "草稿", name: "draft", widget: "boolean", default: false }
      - { label: "部门", name: "department", widget: "string", required: false }
      - { label: "地点", name: "location", widget: "string", required: false }
      - { label: "类型", name: "type", widget: "select", options: ["全职", "兼职", "合同", "实习"], default: "全职" }
      # SEO字段
      - <<: *seo_fields
      - { label: "正文", name: "body", widget: "markdown", required: true }

  # 普通页面
  - name: "pages"
    label: "普通页面"
    folder: "content"
    create: true
    slug: "{{slug}}"
    filter: { field: "type", value: "page" }
    fields:
      - { label: "标题", name: "title", widget: "string", required: true }
      - { label: "类型", name: "type", widget: "hidden", default: "page" }
      - { label: "布局", name: "layout", widget: "select", options: ["simple", "feature", "company", "pricing", "career"], default: "simple" }
      - { label: "发布日期", name: "date", widget: "datetime", date_format: "YYYY-MM-DD", time_format: "HH:mm", required: true }
      - { label: "草稿", name: "draft", widget: "boolean", default: false }
      # SEO字段
      - <<: *seo_fields
      - { label: "正文", name: "body", widget: "markdown", required: true }

  # 首页配置
  - name: "homepage"
    label: "首页"
    files:
      - file: "content/_index.md"
        label: "首页内容"
        name: "index"
        fields:
          - { label: "标题", name: "title", widget: "string", required: true }
          - { label: "草稿", name: "draft", widget: "boolean", default: false }
          # SEO字段
          - name: "seo"
            label: "SEO设置"
            widget: "object"
            collapsed: true
            fields:
              - { label: "Meta描述", name: "description", widget: "text", required: false, hint: "首页在搜索结果中的描述" }
              - { label: "OG图片", name: "image", widget: "image", required: false }
              - { label: "关键词", name: "keywords", widget: "list", required: false }
          - { label: "正文", name: "body", widget: "markdown", required: true }

  # 站点配置
  - name: "settings"
    label: "站点设置"
    files:
      - file: "hugo.toml"
        label: "Hugo 配置"
        name: "hugo-config"
        fields:
          - { label: "站点标题", name: "title", widget: "string", required: true }
          - { label: "基础 URL", name: "baseURL", widget: "string", required: true }
          - { label: "默认语言", name: "defaultContentLanguage", widget: "string", default: "en" }
          # 全局SEO设置
          - name: "params"
            label: "全局参数"
            widget: "object"
            fields:
              - { label: "站点描述", name: "description", widget: "text", required: false, hint: "默认的Meta描述" }
              - { label: "作者", name: "author", widget: "string", required: false }
              - { label: "默认OG图片", name: "image", widget: "image", required: false, hint: "当页面未设置图片时使用的默认图片" }
              # 社交媒体
              - name: "social"
                label: "社交媒体链接"
                widget: "object"
                collapsed: true
                fields:
                  - { label: "Twitter用户名", name: "twitter", widget: "string", required: false, hint: "不需要@符号" }
                  - { label: "LinkedIn", name: "linkedin", widget: "string", required: false }
                  - { label: "GitHub", name: "github", widget: "string", required: false }
                  - { label: "Facebook", name: "facebook", widget: "string", required: false }
                  - { label: "Instagram", name: "instagram", widget: "string", required: false }
                  - { label: "YouTube", name: "youtube", widget: "string", required: false }
              # 分析工具
              - name: "analytics"
                label: "分析工具"
                widget: "object"
                collapsed: true
                fields:
                  - { label: "Google Analytics ID", name: "googleAnalytics", widget: "string", required: false, hint: "格式: G-XXXXXXXXXX" }
                  - { label: "Google Tag Manager ID", name: "googleTagManager", widget: "string", required: false, hint: "格式: GTM-XXXXXX" }
